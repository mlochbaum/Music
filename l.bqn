#! /usr/bin/env dbqn

•state•Eval•FChars"synth.bqn"
lb←⌊⌾(÷⟜600)0.62×fr
lp←⌊lb÷4.4
Out ↩ max × 3 Softclip ÷⟜2

q ← lb⌽20 Hp2 ∾ {∾(0.1 Triangle 𝕩⋆⊢)⍟(3+↕8) lb⥊0.9665}¨ 500+8×↕4
h ← lb⌽(2×lb) ↑ 0.5 × 5300‿1.3 Hp2q (+˝÷√∘≠)(0.85⊸⋆⊸⌊×1-2×1|2e3⊸×)4×(5√20+×˜↕460)×⌜I 16000
b ← 0.6 × 170 Lp1 Triangle ((lb×6‿1÷3.5)⥊˜≠)⊸/ 0‿¯5‿3‿¯4‿0‿¯2‿¯1‿¯6 Trans Note"F#1"
Ls← 1.2e3 Lp1 (0.4⋆1.6√lp÷˜⊒∘⊣) × ·•math.Sin 2.8×Saw∘⊏
l ← 0¨⊸∾ ∾ ((⌊(↕4×lb)÷lp)⌊1-˜≠)⊸Ls¨ ⟨12‿10‿6‿5,3‿5‿8,12‿8‿6.8‿5‿1,3‿¯1‿0⟩ Trans Note"F#4"

(32×lb) Write ⟨q,h,b,l⟩
